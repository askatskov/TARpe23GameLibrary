{
  "openapi": "3.0.0",
  "info": {
    "title": "Game Marketplace API",
    "version": "1.0.0",
    "description": "API for listing, reviewing and managing RAWG-powered games."
  },
  "servers": [
    {
      "url": "http://localhost:8000/api/v1"
    }
  ],
  "paths": {
    "/games": {
      "get": {
        "summary": "Get all games",
        "tags": ["Games"],
        "responses": {
          "200": {
            "description": "List of games",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": { "$ref": "#/components/schemas/Game" }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create game",
        "tags": ["Games"],
        "description": "Create a game manually using RAWG-compatible structure",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/GameCreate" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Game created",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/Game" }
              }
            }
          }
        }
      }
    },

    "/games/featured": {
      "get": {
        "summary": "Get featured games",
        "tags": ["Games"],
        "responses": {
          "200": {
            "description": "Featured list",
            "content": {
              "application/json": {
                "schema": { "type": "array", "items": { "$ref": "#/components/schemas/Game" } }
              }
            }
          }
        }
      }
    },

    "/games/genres": {
      "get": {
        "summary": "Get games grouped by genres",
        "tags": ["Games"],
        "responses": {
          "200": {
            "description": "Grouped games response",
            "content": {
              "application/json": {}
            }
          }
        }
      }
    },

    "/games/{id}": {
      "get": {
        "summary": "Get a game",
        "tags": ["Games"],
        "parameters": [
          { "$ref": "#/components/parameters/GameId" }
        ],
        "responses": {
          "200": {
            "description": "Game found",
            "content": { "application/json": { "schema": { "$ref": "#/components/schemas/Game" } } }
          },
          "404": { "description": "Game not found" }
        }
      },
      "put": {
        "summary": "Update a game with RAWG-compatible values",
        "tags": ["Games"],
        "parameters": [
          { "$ref": "#/components/parameters/GameId" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": { "schema": { "$ref": "#/components/schemas/GameUpdate" } }
          }
        },
        "responses": {
          "200": { "description": "Game updated" },
          "404": { "description": "Game not found" }
        }
      },
      "delete": {
        "summary": "Delete a game",
        "tags": ["Games"],
        "parameters": [
          { "$ref": "#/components/parameters/GameId" }
        ],
        "responses": {
          "204": { "description": "Deleted" },
          "404": { "description": "Game not found" }
        }
      }
    },

    "/games/{id}/similar": {
      "get": {
        "summary": "Get similar games",
        "tags": ["Games"],
        "parameters": [
          { "$ref": "#/components/parameters/GameId" }
        ],
        "responses": {
          "200": { "description": "Similar games" }
        }
      }
    },

    "/games/{id}/price-history": {
      "get": {
        "summary": "Get price history",
        "tags": ["Games"],
        "parameters": [
          { "$ref": "#/components/parameters/GameId" }
        ],
        "responses": {
          "200": { "description": "Price history entries" }
        }
      }
    },

    "/games/{id}/reviews": {
      "get": {
        "summary": "Get reviews",
        "tags": ["Games"],
        "parameters": [
          { "$ref": "#/components/parameters/GameId" }
        ],
        "responses": {
          "200": { "description": "List of reviews" }
        }
      },
      "post": {
        "summary": "Create a review",
        "tags": ["Games"],
        "parameters": [
          { "$ref": "#/components/parameters/GameId" }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/ReviewCreate" }
            }
          }
        },
        "responses": {
          "201": { "description": "Review created" }
        }
      }
    }
  },

  "components": {
    "parameters": {
      "GameId": {
        "name": "id",
        "in": "path",
        "required": true,
        "schema": { "type": "integer" }
      }
    },

    "schemas": {
      "GameCreate": {
        "type": "object",
        "required": ["name", "imageUrl"],
        "properties": {
          "name": { "type": "string" },
          "imageUrl": { "type": "string" },
          "releaseDate": { "type": "string", "format": "date" },
          "description": { "type": "string" },
          "genres": { "type": "array", "items": { "type": "string" } },
          "platforms": { "type": "array", "items": { "type": "string" } },
          "tags": { "type": "array", "items": { "type": "string" } },
          "stores": { "type": "array", "items": { "type": "string" } },
          "rating": { "type": "number" },
          "ratingTop": { "type": "number" },
          "ratingsCount": { "type": "integer" },
          "playtime": { "type": "integer" }
        }
      },

      "GameUpdate": {
        "type": "object",
        "properties": {
          "name": { "type": "string" },
          "imageUrl": { "type": "string" },
          "releaseDate": { "type": "string", "format": "date" },
          "description": { "type": "string" },
          "genres": { "type": "array", "items": { "type": "string" } },
          "platforms": { "type": "array", "items": { "type": "string" } },
          "tags": { "type": "array", "items": { "type": "string" } },
          "stores": { "type": "array", "items": { "type": "string" } },
          "rating": { "type": "number" },
          "ratingTop": { "type": "number" },
          "ratingsCount": { "type": "integer" },
          "playtime": { "type": "integer" }
        }
      },

      "Game": {
        "type": "object",
        "properties": {
          "id": { "type": "integer" },
          "rawgId": { "type": "integer" },
          "slug": { "type": "string" },
          "name": { "type": "string" },
          "description": { "type": "string" },
          "imageUrl": { "type": "string" },
          "releaseDate": { "type": "string", "format": "date" },
          "genres": { "type": "array", "items": { "type": "string" } },
          "platforms": { "type": "array", "items": { "type": "string" } },
          "tags": { "type": "array", "items": { "type": "string" } },
          "stores": { "type": "array", "items": { "type": "string" } },
          "rating": { "type": "number" },
          "ratingTop": { "type": "number" },
          "ratingsCount": { "type": "integer" },
          "playtime": { "type": "integer" }
        }
      },

      "ReviewCreate": {
        "type": "object",
        "required": ["userName", "rating", "review"],
        "properties": {
          "userName": { "type": "string" },
          "rating": { "type": "integer" },
          "review": { "type": "string" }
        }
      }
    }
  }
}
